{"version":3,"file":"js/538.62022b8d.js","mappings":"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","sources":["webpack://hlss/./node_modules/vue-loader/dist/exportHelper.js","webpack://hlss/./src/views/staff/Login.vue","webpack://hlss/./src/views/staff/Login.vue?89ac"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","<template>\r\n  <div class=\"staff-login-container\">\r\n    <div class=\"login-box\">\r\n      <div class=\"logo\">\r\n        <i class=\"fas fa-hotel\"></i>\r\n        <h1>酒店行李系統</h1>\r\n      </div>\r\n      \r\n      <form @submit.prevent=\"handleLogin\" class=\"login-form\">\r\n        <div class=\"form-group\">\r\n          <label for=\"username\">工作人員帳號</label>\r\n          <input\r\n            id=\"username\"\r\n            v-model.trim=\"username\"\r\n            type=\"text\"\r\n            placeholder=\"請輸入工號\"\r\n            required\r\n            autocomplete=\"username\"\r\n            :disabled=\"isLoading\"\r\n          >\r\n        </div>\r\n        \r\n        <div class=\"form-group password-group\">\r\n          <label for=\"password\">密碼</label>\r\n          <div class=\"password-input-wrapper\">\r\n            <input\r\n              id=\"password\"\r\n              v-model.trim=\"password\"\r\n              :type=\"showPassword ? 'text' : 'password'\"\r\n              placeholder=\"請輸入密碼\"\r\n              required\r\n              autocomplete=\"current-password\"\r\n              :disabled=\"isLoading\"\r\n              @keyup.enter=\"handleLogin\"\r\n            >\r\n            <button \r\n              type=\"button\" \r\n              class=\"toggle-password\"\r\n              @click=\"showPassword = !showPassword\"\r\n              tabindex=\"-1\"\r\n            >\r\n              <i :class=\"showPassword ? 'fas fa-eye-slash' : 'fas fa-eye'\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        \r\n        <button \r\n          type=\"submit\" \r\n          class=\"login-btn\"\r\n          :class=\"{ loading: isLoading }\"\r\n          :disabled=\"isLoading\"\r\n        >\r\n          <template v-if=\"!isLoading\">\r\n            <i class=\"fas fa-sign-in-alt\"></i> 登入系統\r\n          </template>\r\n          <template v-else>\r\n            <i class=\"fas fa-spinner fa-spin\"></i> 登入中...\r\n          </template>\r\n        </button>\r\n        \r\n        <div v-if=\"errorMessage\" class=\"error-message\">\r\n          <i class=\"fas fa-exclamation-circle\"></i> {{ errorMessage }}\r\n        </div>\r\n      </form>\r\n    </div>\r\n    \r\n    <footer class=\"login-footer\">\r\n      <p>© {{ currentYear }} 置地酒店禮賓部行李寄存系統</p>\r\n      <p class=\"version\">v{{ appVersion }}</p>\r\n    </footer>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { useAuthStore } from '@/stores/auth'\r\n\r\nexport default {\r\n  setup() {\r\n    const router = useRouter()\r\n    const authStore = useAuthStore() // 统一使用 authStore 命名\r\n\r\n    const username = ref('')\r\n    const password = ref('')\r\n    const errorMessage = ref('')\r\n    const isLoading = ref(false)\r\n    const showPassword = ref(false)\r\n\r\n    const currentYear = computed(() => new Date().getFullYear())\r\n    const appVersion = process.env.VUE_APP_VERSION || '1.0.0'\r\n\r\n    const handleLogin = async () => {\r\n      if (!username.value || !password.value) {\r\n        errorMessage.value = '請輸入帳號和密碼'\r\n        return\r\n      }\r\n\r\n      try {\r\n        isLoading.value = true\r\n        errorMessage.value = ''\r\n        \r\n        // 使用 authStore 而不是 auth\r\n        const result = await authStore.staffLogin(username.value, password.value)\r\n        \r\n        if (result?.token) {\r\n          console.log('跳转到仪表盘...')\r\n          const redirectPath = router.currentRoute.value.query.redirect || '/staff/dashboard'\r\n          router.replace(redirectPath)\r\n        }\r\n      } catch (error) {\r\n        console.error('登录流程错误:', error)\r\n        errorMessage.value = error.message\r\n        password.value = ''\r\n      } finally {\r\n        isLoading.value = false\r\n      }\r\n    }\r\n\r\n    onMounted(() => {\r\n      document.getElementById('username')?.focus()\r\n    })\r\n\r\n    return {\r\n      username,\r\n      password,\r\n      errorMessage,\r\n      isLoading,\r\n      showPassword,\r\n      currentYear,\r\n      appVersion,\r\n      handleLogin\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.staff-login-container {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: linear-gradient(135deg, #1a2a6c, #b21f1f);\r\n  padding: 20px;\r\n}\r\n\r\n.login-box {\r\n  width: 100%;\r\n  max-width: 400px;\r\n  background: white;\r\n  border-radius: 10px;\r\n  padding: 2rem;\r\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);\r\n  animation: fadeIn 0.5s ease-out;\r\n}\r\n\r\n@keyframes fadeIn {\r\n  from { opacity: 0; transform: translateY(20px); }\r\n  to { opacity: 1; transform: translateY(0); }\r\n}\r\n\r\n.logo {\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n  color: #2c3e50;\r\n}\r\n\r\n.logo i {\r\n  font-size: 3rem;\r\n  margin-bottom: 1rem;\r\n  color: #3498db;\r\n}\r\n\r\n.login-form {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.5rem;\r\n}\r\n\r\n.form-group label {\r\n  font-weight: 600;\r\n  color: #34495e;\r\n}\r\n\r\n.form-group input {\r\n  padding: 12px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 4px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.3s;\r\n}\r\n\r\n.form-group input:focus {\r\n  border-color: #3498db;\r\n  outline: none;\r\n  box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);\r\n}\r\n\r\n.password-group {\r\n  position: relative;\r\n}\r\n\r\n.password-input-wrapper {\r\n  position: relative;\r\n}\r\n\r\n.toggle-password {\r\n  position: absolute;\r\n  right: 10px;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  background: none;\r\n  border: none;\r\n  color: #7f8c8d;\r\n  cursor: pointer;\r\n  padding: 5px;\r\n}\r\n\r\n.login-btn {\r\n  padding: 12px;\r\n  background: #3498db;\r\n  color: white;\r\n  border: none;\r\n  border-radius: 5px;\r\n  font-size: 1rem;\r\n  cursor: pointer;\r\n  transition: all 0.3s;\r\n  height: 44px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 8px;\r\n}\r\n\r\n.login-btn:hover:not(:disabled) {\r\n  background: #2980b9;\r\n}\r\n\r\n.login-btn:disabled {\r\n  background: #95a5a6;\r\n  cursor: not-allowed;\r\n}\r\n\r\n.login-btn.loading {\r\n  cursor: wait;\r\n}\r\n\r\n.error-message {\r\n  color: #e74c3c;\r\n  text-align: center;\r\n  margin-top: 1rem;\r\n  font-size: 0.9rem;\r\n  animation: shake 0.5s;\r\n}\r\n\r\n@keyframes shake {\r\n  0%, 100% { transform: translateX(0); }\r\n  20%, 60% { transform: translateX(-5px); }\r\n  40%, 80% { transform: translateX(5px); }\r\n}\r\n\r\n.login-footer {\r\n  margin-top: 2rem;\r\n  color: white;\r\n  text-align: center;\r\n  opacity: 0.8;\r\n  font-size: 0.9rem;\r\n}\r\n\r\n.login-footer .version {\r\n  font-size: 0.8rem;\r\n  margin-top: 0.5rem;\r\n  opacity: 0.6;\r\n}\r\n\r\n/* 响应式调整 */\r\n@media (max-width: 480px) {\r\n  .login-box {\r\n    padding: 1.5rem;\r\n  }\r\n  \r\n  .logo i {\r\n    font-size: 2.5rem;\r\n  }\r\n}\r\n</style>","import { render } from \"./Login.vue?vue&type=template&id=08ee284a&scoped=true\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=08ee284a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-08ee284a\"]])\n\nexport default __exports__"],"names":["exports","sfc","props","target","__vccOpts","key","val","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onSubmit","_cache","_withModifiers","args","$setup","handleLogin","_hoisted_3","for","id","username","$event","type","placeholder","required","autocomplete","disabled","isLoading","trim","_hoisted_5","_hoisted_6","password","showPassword","onKeyup","_withKeys","onClick","tabindex","_normalizeClass","loading","_Fragment","errorMessage","_hoisted_9","_toDisplayString","_hoisted_10","currentYear","_hoisted_11","appVersion","setup","router","useRouter","authStore","useAuthStore","ref","computed","Date","getFullYear","async","value","result","staffLogin","token","console","log","redirectPath","currentRoute","query","redirect","replace","error","message","onMounted","document","getElementById","focus","__exports__","render"],"sourceRoot":""}