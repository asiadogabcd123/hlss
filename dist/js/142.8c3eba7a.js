(self["webpackChunkhlss"]=self["webpackChunkhlss"]||[]).push([[142],{4343:function(e,t,n){var r,a,i;n(4114);var l=function(){var e=function(e,t){var r=236,i=17,d=e,v=n[t],h=null,p=0,m=null,y=[],w={},L=function(e,t){p=4*d+17,h=function(e){for(var t=new Array(e),n=0;n<e;n+=1){t[n]=new Array(e);for(var r=0;r<e;r+=1)t[n][r]=null}return t}(p),D(0,0),D(p-7,0),D(0,p-7),C(),M(),B(e,t),d>=7&&A(e),null==m&&(m=x(d,v,y)),T(m,t)},D=function(e,t){for(var n=-1;n<=7;n+=1)if(!(e+n<=-1||p<=e+n))for(var r=-1;r<=7;r+=1)t+r<=-1||p<=t+r||(h[e+n][t+r]=0<=n&&n<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=r&&r<=4)},b=function(){for(var e=0,t=0,n=0;n<8;n+=1){L(!0,n);var r=a.getLostPoint(w);(0==n||e>r)&&(e=r,t=n)}return t},M=function(){for(var e=8;e<p-8;e+=1)null==h[e][6]&&(h[e][6]=e%2==0);for(var t=8;t<p-8;t+=1)null==h[6][t]&&(h[6][t]=t%2==0)},C=function(){for(var e=a.getPatternPosition(d),t=0;t<e.length;t+=1)for(var n=0;n<e.length;n+=1){var r=e[t],i=e[n];if(null==h[r][i])for(var l=-2;l<=2;l+=1)for(var o=-2;o<=2;o+=1)h[r+l][i+o]=-2==l||2==l||-2==o||2==o||0==l&&0==o}},A=function(e){for(var t=a.getBCHTypeNumber(d),n=0;n<18;n+=1){var r=!e&&1==(t>>n&1);h[Math.floor(n/3)][n%3+p-8-3]=r}for(n=0;n<18;n+=1){r=!e&&1==(t>>n&1);h[n%3+p-8-3][Math.floor(n/3)]=r}},B=function(e,t){for(var n=v<<3|t,r=a.getBCHTypeInfo(n),i=0;i<15;i+=1){var l=!e&&1==(r>>i&1);i<6?h[i][8]=l:i<8?h[i+1][8]=l:h[p-15+i][8]=l}for(i=0;i<15;i+=1){l=!e&&1==(r>>i&1);i<8?h[8][p-i-1]=l:i<9?h[8][15-i-1+1]=l:h[8][15-i-1]=l}h[p-8][8]=!e},T=function(e,t){for(var n=-1,r=p-1,i=7,l=0,o=a.getMaskFunction(t),s=p-1;s>0;s-=2){6==s&&(s-=1);while(1){for(var u=0;u<2;u+=1)if(null==h[r][s-u]){var c=!1;l<e.length&&(c=1==(e[l]>>>i&1));var f=o(r,s-u);f&&(c=!c),h[r][s-u]=c,i-=1,-1==i&&(l+=1,i=7)}if(r+=n,r<0||p<=r){r-=n,n=-n;break}}}},E=function(e,t){for(var n=0,r=0,i=0,o=new Array(t.length),s=new Array(t.length),u=0;u<t.length;u+=1){var c=t[u].dataCount,f=t[u].totalCount-c;r=Math.max(r,c),i=Math.max(i,f),o[u]=new Array(c);for(var g=0;g<o[u].length;g+=1)o[u][g]=255&e.getBuffer()[g+n];n+=c;var d=a.getErrorCorrectPolynomial(f),v=l(o[u],d.getLength()-1),h=v.mod(d);s[u]=new Array(d.getLength()-1);for(g=0;g<s[u].length;g+=1){var p=g+h.getLength()-s[u].length;s[u][g]=p>=0?h.getAt(p):0}}var k=0;for(g=0;g<t.length;g+=1)k+=t[g].totalCount;var m=new Array(k),y=0;for(g=0;g<r;g+=1)for(u=0;u<t.length;u+=1)g<o[u].length&&(m[y]=o[u][g],y+=1);for(g=0;g<i;g+=1)for(u=0;u<t.length;u+=1)g<s[u].length&&(m[y]=s[u][g],y+=1);return m},x=function(e,t,n){for(var l=o.getRSBlocks(e,t),u=s(),c=0;c<n.length;c+=1){var f=n[c];u.put(f.getMode(),4),u.put(f.getLength(),a.getLengthInBits(f.getMode(),e)),f.write(u)}var g=0;for(c=0;c<l.length;c+=1)g+=l[c].dataCount;if(u.getLengthInBits()>8*g)throw"code length overflow. ("+u.getLengthInBits()+">"+8*g+")";u.getLengthInBits()+4<=8*g&&u.put(0,4);while(u.getLengthInBits()%8!=0)u.putBit(!1);while(1){if(u.getLengthInBits()>=8*g)break;if(u.put(r,8),u.getLengthInBits()>=8*g)break;u.put(i,8)}return E(u,l)};w.addData=function(e,t){t=t||"Byte";var n=null;switch(t){case"Numeric":n=u(e);break;case"Alphanumeric":n=c(e);break;case"Byte":n=f(e);break;case"Kanji":n=g(e);break;default:throw"mode:"+t}y.push(n),m=null},w.isDark=function(e,t){if(e<0||p<=e||t<0||p<=t)throw e+","+t;return h[e][t]},w.getModuleCount=function(){return p},w.make=function(){if(d<1){for(var e=1;e<40;e++){for(var t=o.getRSBlocks(e,v),n=s(),r=0;r<y.length;r++){var i=y[r];n.put(i.getMode(),4),n.put(i.getLength(),a.getLengthInBits(i.getMode(),e)),i.write(n)}var l=0;for(r=0;r<t.length;r++)l+=t[r].dataCount;if(n.getLengthInBits()<=8*l)break}d=e}L(!1,b())},w.createTableTag=function(e,t){e=e||2,t="undefined"==typeof t?4*e:t;var n="";n+='<table style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: "+t+"px;",n+='">',n+="<tbody>";for(var r=0;r<w.getModuleCount();r+=1){n+="<tr>";for(var a=0;a<w.getModuleCount();a+=1)n+='<td style="',n+=" border-width: 0px; border-style: none;",n+=" border-collapse: collapse;",n+=" padding: 0px; margin: 0px;",n+=" width: "+e+"px;",n+=" height: "+e+"px;",n+=" background-color: ",n+=w.isDark(r,a)?"#000000":"#ffffff",n+=";",n+='"/>';n+="</tr>"}return n+="</tbody>",n+="</table>",n},w.createSvgTag=function(e,t,n,r){var a={};"object"==typeof arguments[0]&&(a=arguments[0],e=a.cellSize,t=a.margin,n=a.alt,r=a.title),e=e||2,t="undefined"==typeof t?4*e:t,n="string"===typeof n?{text:n}:n||{},n.text=n.text||null,n.id=n.text?n.id||"qrcode-description":null,r="string"===typeof r?{text:r}:r||{},r.text=r.text||null,r.id=r.text?r.id||"qrcode-title":null;var i,l,o,s,u,c=w.getModuleCount()*e+2*t,f="";for(u="l"+e+",0 0,"+e+" -"+e+",0 0,-"+e+"z ",f+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg"',f+=a.scalable?"":' width="'+c+'px" height="'+c+'px"',f+=' viewBox="0 0 '+c+" "+c+'" ',f+=' preserveAspectRatio="xMinYMin meet"',f+=r.text||n.text?' role="img" aria-labelledby="'+_([r.id,n.id].join(" ").trim())+'"':"",f+=">",f+=r.text?'<title id="'+_(r.id)+'">'+_(r.text)+"</title>":"",f+=n.text?'<description id="'+_(n.id)+'">'+_(n.text)+"</description>":"",f+='<rect width="100%" height="100%" fill="white" cx="0" cy="0"/>',f+='<path d="',o=0;o<w.getModuleCount();o+=1)for(s=o*e+t,i=0;i<w.getModuleCount();i+=1)w.isDark(o,i)&&(l=i*e+t,f+="M"+l+","+s+u);return f+='" stroke="transparent" fill="black"/>',f+="</svg>",f},w.createDataURL=function(e,t){e=e||2,t="undefined"==typeof t?4*e:t;var n=w.getModuleCount()*e+2*t,r=t,a=n-t;return k(n,n,function(t,n){if(r<=t&&t<a&&r<=n&&n<a){var i=Math.floor((t-r)/e),l=Math.floor((n-r)/e);return w.isDark(l,i)?0:1}return 1})},w.createImgTag=function(e,t,n){e=e||2,t="undefined"==typeof t?4*e:t;var r=w.getModuleCount()*e+2*t,a="";return a+="<img",a+=' src="',a+=w.createDataURL(e,t),a+='"',a+=' width="',a+=r,a+='"',a+=' height="',a+=r,a+='"',n&&(a+=' alt="',a+=_(n),a+='"'),a+="/>",a};var _=function(e){for(var t="",n=0;n<e.length;n+=1){var r=e.charAt(n);switch(r){case"<":t+="&lt;";break;case">":t+="&gt;";break;case"&":t+="&amp;";break;case'"':t+="&quot;";break;default:t+=r;break}}return t},I=function(e){var t=1;e="undefined"==typeof e?2*t:e;var n,r,a,i,l,o=w.getModuleCount()*t+2*e,s=e,u=o-e,c={"██":"█","█ ":"▀"," █":"▄","  ":" "},f={"██":"▀","█ ":"▀"," █":" ","  ":" "},g="";for(n=0;n<o;n+=2){for(a=Math.floor((n-s)/t),i=Math.floor((n+1-s)/t),r=0;r<o;r+=1)l="█",s<=r&&r<u&&s<=n&&n<u&&w.isDark(a,Math.floor((r-s)/t))&&(l=" "),s<=r&&r<u&&s<=n+1&&n+1<u&&w.isDark(i,Math.floor((r-s)/t))?l+=" ":l+="█",g+=e<1&&n+1>=u?f[l]:c[l];g+="\n"}return o%2&&e>0?g.substring(0,g.length-o-1)+Array(o+1).join("▀"):g.substring(0,g.length-1)};return w.createASCII=function(e,t){if(e=e||1,e<2)return I(t);e-=1,t="undefined"==typeof t?2*e:t;var n,r,a,i,l=w.getModuleCount()*e+2*t,o=t,s=l-t,u=Array(e+1).join("██"),c=Array(e+1).join("  "),f="",g="";for(n=0;n<l;n+=1){for(a=Math.floor((n-o)/e),g="",r=0;r<l;r+=1)i=1,o<=r&&r<s&&o<=n&&n<s&&w.isDark(a,Math.floor((r-o)/e))&&(i=0),g+=i?u:c;for(a=0;a<e;a+=1)f+=g+"\n"}return f.substring(0,f.length-1)},w.renderTo2dContext=function(e,t){t=t||2;for(var n=w.getModuleCount(),r=0;r<n;r++)for(var a=0;a<n;a++)e.fillStyle=w.isDark(r,a)?"black":"white",e.fillRect(a*t,r*t,t,t)},w};e.stringToBytesFuncs={default:function(e){for(var t=[],n=0;n<e.length;n+=1){var r=e.charCodeAt(n);t.push(255&r)}return t}},e.stringToBytes=e.stringToBytesFuncs["default"],e.createStringToBytes=function(e,t){var n=function(){var n=h(e),r=function(){var e=n.read();if(-1==e)throw"eof";return e},a=0,i={};while(1){var l=n.read();if(-1==l)break;var o=r(),s=r(),u=r(),c=String.fromCharCode(l<<8|o),f=s<<8|u;i[c]=f,a+=1}if(a!=t)throw a+" != "+t;return i}(),r="?".charCodeAt(0);return function(e){for(var t=[],a=0;a<e.length;a+=1){var i=e.charCodeAt(a);if(i<128)t.push(i);else{var l=n[e.charAt(a)];"number"==typeof l?(255&l)==l?t.push(l):(t.push(l>>>8),t.push(255&l)):t.push(r)}}return t}};var t={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},n={L:1,M:0,Q:3,H:2},r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},a=function(){var e=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],n=1335,a=7973,o=21522,s={},u=function(e){var t=0;while(0!=e)t+=1,e>>>=1;return t};return s.getBCHTypeInfo=function(e){var t=e<<10;while(u(t)-u(n)>=0)t^=n<<u(t)-u(n);return(e<<10|t)^o},s.getBCHTypeNumber=function(e){var t=e<<12;while(u(t)-u(a)>=0)t^=a<<u(t)-u(a);return e<<12|t},s.getPatternPosition=function(t){return e[t-1]},s.getMaskFunction=function(e){switch(e){case r.PATTERN000:return function(e,t){return(e+t)%2==0};case r.PATTERN001:return function(e,t){return e%2==0};case r.PATTERN010:return function(e,t){return t%3==0};case r.PATTERN011:return function(e,t){return(e+t)%3==0};case r.PATTERN100:return function(e,t){return(Math.floor(e/2)+Math.floor(t/3))%2==0};case r.PATTERN101:return function(e,t){return e*t%2+e*t%3==0};case r.PATTERN110:return function(e,t){return(e*t%2+e*t%3)%2==0};case r.PATTERN111:return function(e,t){return(e*t%3+(e+t)%2)%2==0};default:throw"bad maskPattern:"+e}},s.getErrorCorrectPolynomial=function(e){for(var t=l([1],0),n=0;n<e;n+=1)t=t.multiply(l([1,i.gexp(n)],0));return t},s.getLengthInBits=function(e,n){if(1<=n&&n<10)switch(e){case t.MODE_NUMBER:return 10;case t.MODE_ALPHA_NUM:return 9;case t.MODE_8BIT_BYTE:return 8;case t.MODE_KANJI:return 8;default:throw"mode:"+e}else if(n<27)switch(e){case t.MODE_NUMBER:return 12;case t.MODE_ALPHA_NUM:return 11;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 10;default:throw"mode:"+e}else{if(!(n<41))throw"type:"+n;switch(e){case t.MODE_NUMBER:return 14;case t.MODE_ALPHA_NUM:return 13;case t.MODE_8BIT_BYTE:return 16;case t.MODE_KANJI:return 12;default:throw"mode:"+e}}},s.getLostPoint=function(e){for(var t=e.getModuleCount(),n=0,r=0;r<t;r+=1)for(var a=0;a<t;a+=1){for(var i=0,l=e.isDark(r,a),o=-1;o<=1;o+=1)if(!(r+o<0||t<=r+o))for(var s=-1;s<=1;s+=1)a+s<0||t<=a+s||0==o&&0==s||l==e.isDark(r+o,a+s)&&(i+=1);i>5&&(n+=3+i-5)}for(r=0;r<t-1;r+=1)for(a=0;a<t-1;a+=1){var u=0;e.isDark(r,a)&&(u+=1),e.isDark(r+1,a)&&(u+=1),e.isDark(r,a+1)&&(u+=1),e.isDark(r+1,a+1)&&(u+=1),0!=u&&4!=u||(n+=3)}for(r=0;r<t;r+=1)for(a=0;a<t-6;a+=1)e.isDark(r,a)&&!e.isDark(r,a+1)&&e.isDark(r,a+2)&&e.isDark(r,a+3)&&e.isDark(r,a+4)&&!e.isDark(r,a+5)&&e.isDark(r,a+6)&&(n+=40);for(a=0;a<t;a+=1)for(r=0;r<t-6;r+=1)e.isDark(r,a)&&!e.isDark(r+1,a)&&e.isDark(r+2,a)&&e.isDark(r+3,a)&&e.isDark(r+4,a)&&!e.isDark(r+5,a)&&e.isDark(r+6,a)&&(n+=40);var c=0;for(a=0;a<t;a+=1)for(r=0;r<t;r+=1)e.isDark(r,a)&&(c+=1);var f=Math.abs(100*c/t/t-50)/5;return n+=10*f,n},s}(),i=function(){for(var e=new Array(256),t=new Array(256),n=0;n<8;n+=1)e[n]=1<<n;for(n=8;n<256;n+=1)e[n]=e[n-4]^e[n-5]^e[n-6]^e[n-8];for(n=0;n<255;n+=1)t[e[n]]=n;var r={glog:function(e){if(e<1)throw"glog("+e+")";return t[e]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return e[t]}};return r}();function l(e,t){if("undefined"==typeof e.length)throw e.length+"/"+t;var n=function(){var n=0;while(n<e.length&&0==e[n])n+=1;for(var r=new Array(e.length-n+t),a=0;a<e.length-n;a+=1)r[a]=e[a+n];return r}(),r={getAt:function(e){return n[e]},getLength:function(){return n.length},multiply:function(e){for(var t=new Array(r.getLength()+e.getLength()-1),n=0;n<r.getLength();n+=1)for(var a=0;a<e.getLength();a+=1)t[n+a]^=i.gexp(i.glog(r.getAt(n))+i.glog(e.getAt(a)));return l(t,0)},mod:function(e){if(r.getLength()-e.getLength()<0)return r;for(var t=i.glog(r.getAt(0))-i.glog(e.getAt(0)),n=new Array(r.getLength()),a=0;a<r.getLength();a+=1)n[a]=r.getAt(a);for(a=0;a<e.getLength();a+=1)n[a]^=i.gexp(i.glog(e.getAt(a))+t);return l(n,0).mod(e)}};return r}var o=function(){var e=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12,7,37,13],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t=function(e,t){var n={};return n.totalCount=e,n.dataCount=t,n},r={},a=function(t,r){switch(r){case n.L:return e[4*(t-1)+0];case n.M:return e[4*(t-1)+1];case n.Q:return e[4*(t-1)+2];case n.H:return e[4*(t-1)+3];default:return}};return r.getRSBlocks=function(e,n){var r=a(e,n);if("undefined"==typeof r)throw"bad rs block @ typeNumber:"+e+"/errorCorrectionLevel:"+n;for(var i=r.length/3,l=[],o=0;o<i;o+=1)for(var s=r[3*o+0],u=r[3*o+1],c=r[3*o+2],f=0;f<s;f+=1)l.push(t(u,c));return l},r}(),s=function(){var e=[],t=0,n={getBuffer:function(){return e},getAt:function(t){var n=Math.floor(t/8);return 1==(e[n]>>>7-t%8&1)},put:function(e,t){for(var r=0;r<t;r+=1)n.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return t},putBit:function(n){var r=Math.floor(t/8);e.length<=r&&e.push(0),n&&(e[r]|=128>>>t%8),t+=1}};return n},u=function(e){var n=t.MODE_NUMBER,r=e,a={getMode:function(){return n},getLength:function(e){return r.length},write:function(e){var t=r,n=0;while(n+2<t.length)e.put(i(t.substring(n,n+3)),10),n+=3;n<t.length&&(t.length-n==1?e.put(i(t.substring(n,n+1)),4):t.length-n==2&&e.put(i(t.substring(n,n+2)),7))}},i=function(e){for(var t=0,n=0;n<e.length;n+=1)t=10*t+l(e.charAt(n));return t},l=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);throw"illegal char :"+e};return a},c=function(e){var n=t.MODE_ALPHA_NUM,r=e,a={getMode:function(){return n},getLength:function(e){return r.length},write:function(e){var t=r,n=0;while(n+1<t.length)e.put(45*i(t.charAt(n))+i(t.charAt(n+1)),11),n+=2;n<t.length&&e.put(i(t.charAt(n)),6)}},i=function(e){if("0"<=e&&e<="9")return e.charCodeAt(0)-"0".charCodeAt(0);if("A"<=e&&e<="Z")return e.charCodeAt(0)-"A".charCodeAt(0)+10;switch(e){case" ":return 36;case"$":return 37;case"%":return 38;case"*":return 39;case"+":return 40;case"-":return 41;case".":return 42;case"/":return 43;case":":return 44;default:throw"illegal char :"+e}};return a},f=function(n){var r=t.MODE_8BIT_BYTE,a=e.stringToBytes(n),i={getMode:function(){return r},getLength:function(e){return a.length},write:function(e){for(var t=0;t<a.length;t+=1)e.put(a[t],8)}};return i},g=function(n){var r=t.MODE_KANJI,a=e.stringToBytesFuncs["SJIS"];if(!a)throw"sjis not supported.";!function(e,t){var n=a(e);if(2!=n.length||(n[0]<<8|n[1])!=t)throw"sjis not supported."}("友",38726);var i=a(n),l={getMode:function(){return r},getLength:function(e){return~~(i.length/2)},write:function(e){var t=i,n=0;while(n+1<t.length){var r=(255&t[n])<<8|255&t[n+1];if(33088<=r&&r<=40956)r-=33088;else{if(!(57408<=r&&r<=60351))throw"illegal char at "+(n+1)+"/"+r;r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13),n+=2}if(n<t.length)throw"illegal char at "+(n+1)}};return l},d=function(){var e=[],t={writeByte:function(t){e.push(255&t)},writeShort:function(e){t.writeByte(e),t.writeByte(e>>>8)},writeBytes:function(e,n,r){n=n||0,r=r||e.length;for(var a=0;a<r;a+=1)t.writeByte(e[a+n])},writeString:function(e){for(var n=0;n<e.length;n+=1)t.writeByte(e.charCodeAt(n))},toByteArray:function(){return e},toString:function(){var t="";t+="[";for(var n=0;n<e.length;n+=1)n>0&&(t+=","),t+=e[n];return t+="]",t}};return t},v=function(){var e=0,t=0,n=0,r="",a={},i=function(e){r+=String.fromCharCode(l(63&e))},l=function(e){if(e<0);else{if(e<26)return 65+e;if(e<52)return e-26+97;if(e<62)return e-52+48;if(62==e)return 43;if(63==e)return 47}throw"n:"+e};return a.writeByte=function(r){e=e<<8|255&r,t+=8,n+=1;while(t>=6)i(e>>>t-6),t-=6},a.flush=function(){if(t>0&&(i(e<<6-t),e=0,t=0),n%3!=0)for(var a=3-n%3,l=0;l<a;l+=1)r+="="},a.toString=function(){return r},a},h=function(e){var t=e,n=0,r=0,a=0,i={read:function(){while(a<8){if(n>=t.length){if(0==a)return-1;throw"unexpected end of file./"+a}var e=t.charAt(n);if(n+=1,"="==e)return a=0,-1;e.match(/^\s$/)||(r=r<<6|l(e.charCodeAt(0)),a+=6)}var i=r>>>a-8&255;return a-=8,i}},l=function(e){if(65<=e&&e<=90)return e-65;if(97<=e&&e<=122)return e-97+26;if(48<=e&&e<=57)return e-48+52;if(43==e)return 62;if(47==e)return 63;throw"c:"+e};return i},p=function(e,t){var n=e,r=t,a=new Array(e*t),i={setPixel:function(e,t,r){a[t*n+e]=r},write:function(e){e.writeString("GIF87a"),e.writeShort(n),e.writeShort(r),e.writeByte(128),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(0),e.writeByte(255),e.writeByte(255),e.writeByte(255),e.writeString(","),e.writeShort(0),e.writeShort(0),e.writeShort(n),e.writeShort(r),e.writeByte(0);var t=2,a=o(t);e.writeByte(t);var i=0;while(a.length-i>255)e.writeByte(255),e.writeBytes(a,i,255),i+=255;e.writeByte(a.length-i),e.writeBytes(a,i,a.length-i),e.writeByte(0),e.writeString(";")}},l=function(e){var t=e,n=0,r=0,a={write:function(e,a){if(e>>>a!=0)throw"length over";while(n+a>=8)t.writeByte(255&(e<<n|r)),a-=8-n,e>>>=8-n,r=0,n=0;r|=e<<n,n+=a},flush:function(){n>0&&t.writeByte(r)}};return a},o=function(e){for(var t=1<<e,n=1+(1<<e),r=e+1,i=s(),o=0;o<t;o+=1)i.add(String.fromCharCode(o));i.add(String.fromCharCode(t)),i.add(String.fromCharCode(n));var u=d(),c=l(u);c.write(t,r);var f=0,g=String.fromCharCode(a[f]);f+=1;while(f<a.length){var v=String.fromCharCode(a[f]);f+=1,i.contains(g+v)?g+=v:(c.write(i.indexOf(g),r),i.size()<4095&&(i.size()==1<<r&&(r+=1),i.add(g+v)),g=v)}return c.write(i.indexOf(g),r),c.write(n,r),c.flush(),u.toByteArray()},s=function(){var e={},t=0,n={add:function(r){if(n.contains(r))throw"dup key:"+r;e[r]=t,t+=1},size:function(){return t},indexOf:function(t){return e[t]},contains:function(t){return"undefined"!=typeof e[t]}};return n};return i},k=function(e,t,n){for(var r=p(e,t),a=0;a<t;a+=1)for(var i=0;i<e;i+=1)r.setPixel(i,a,n(i,a));var l=d();r.write(l);for(var o=v(),s=l.toByteArray(),u=0;u<s.length;u+=1)o.writeByte(s[u]);return o.flush(),"data:image/gif;base64,"+o};return e}();!function(){l.stringToBytesFuncs["UTF-8"]=function(e){function t(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t.push(r):r<2048?t.push(192|r>>6,128|63&r):r<55296||r>=57344?t.push(224|r>>12,128|r>>6&63,128|63&r):(n++,r=65536+((1023&r)<<10|1023&e.charCodeAt(n)),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r))}return t}return t(e)}}(),function(n){a=[],r=n,i="function"===typeof r?r.apply(t,a):r,void 0===i||(e.exports=i)}(function(){return l})},6142:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return G}});var r=n(6768),a=n(5130),i=n(4232);const l={class:"qr-batch-container"},o={class:"main-content"},s={class:"list-container"},u={class:"date-selector"},c={class:"date-filter"},f=["max"],g={class:"quick-dates"},d=["onClick"],v={class:"date-actions"},h={class:"date-display"},p={key:0},k={key:1},m={class:"list-section"},y={key:0,class:"no-data"},w={key:1},L={class:"date-header"},D={class:"luggage-grid"},b=["onClick"],M={class:"luggage-header"},C={class:"luggage-body"},A={class:"list-section"},B={key:0,class:"no-data"},T={key:1},E={class:"date-header"},x={class:"luggage-grid"},_=["onClick"],I={class:"luggage-header"},N={class:"luggage-body"},Y={key:0,class:"preview-content"},R={class:"preview-header"},P={class:"guest-info"},S={class:"qr-grid"},O={class:"qr-card"},W=["src"],$={class:"qr-card"},K=["src"],q={key:1,class:"empty-preview"};function H(e,t,n,H,F,X){return(0,r.uX)(),(0,r.CE)("div",l,[(0,r.Lk)("div",o,[(0,r.Lk)("div",s,[(0,r.Lk)("div",u,[(0,r.Lk)("div",c,[t[4]||(t[4]=(0,r.Lk)("label",{for:"date-filter"},"篩選日期：",-1)),(0,r.bo)((0,r.Lk)("input",{type:"date",id:"date-filter","onUpdate:modelValue":t[0]||(t[0]=e=>H.selectedDate=e),onChange:t[1]||(t[1]=(...e)=>H.handleDateChange&&H.handleDateChange(...e)),max:H.today},null,40,f),[[a.Jo,H.selectedDate]]),(0,r.Lk)("div",g,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(H.quickDates,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.value,class:(0,i.C4)(["quick-date",{active:e.value===H.selectedDate}]),onClick:t=>H.selectQuickDate(e.value)},(0,i.v_)(e.label),11,d))),128))])]),(0,r.Lk)("div",v,[(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>H.resetDateFilter&&H.resetDateFilter(...e)),class:"action-btn reset-btn"},t[5]||(t[5]=[(0,r.Lk)("i",{class:"fas fa-times"},null,-1),(0,r.eW)(" 清除篩選 ")]))]),(0,r.Lk)("div",h,["range"===H.selectedQuickDate?.type?((0,r.uX)(),(0,r.CE)("span",p," 顯示範圍："+(0,i.v_)(H.formatDate(H.selectedDate))+" 至 "+(0,i.v_)(H.formatDate(H.today)),1)):((0,r.uX)(),(0,r.CE)("span",k," 顯示日期："+(0,i.v_)(H.formattedSelectedDate),1))])]),(0,r.Lk)("div",m,[t[15]||(t[15]=(0,r.Lk)("h2",null,[(0,r.Lk)("i",{class:"fas fa-print"}),(0,r.eW)(" 待列印行李標籤")],-1)),0!==H.pendingLuggage.length||H.loading?((0,r.uX)(),(0,r.CE)("div",w,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(H.groupedPendingLuggage,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.date},[(0,r.Lk)("h3",L,(0,i.v_)(H.formatGroupDate(e.date)),1),(0,r.Lk)("div",D,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.items,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,i.C4)(["luggage-card",{active:H.luggageInfo?.id===e.id}]),onClick:t=>H.loadLuggage(e.id)},[(0,r.Lk)("div",M,[t[7]||(t[7]=(0,r.Lk)("span",{class:"badge new"},"新",-1)),(0,r.Lk)("strong",null,(0,i.v_)(e.id),1)]),(0,r.Lk)("div",C,[(0,r.Lk)("p",null,[t[8]||(t[8]=(0,r.Lk)("i",{class:"fas fa-user"},null,-1)),(0,r.eW)(" "+(0,i.v_)(e.guestName),1)]),(0,r.Lk)("p",null,[t[9]||(t[9]=(0,r.Lk)("i",{class:"fas fa-phone"},null,-1)),(0,r.eW)(" ***-****-"+(0,i.v_)(H.getPhoneLast4(e.phone)),1)]),(0,r.Lk)("p",null,[t[10]||(t[10]=(0,r.Lk)("i",{class:"fas fa-building"},null,-1)),(0,r.eW)(" 房間號："+(0,i.v_)(e.roomNumber||"未填寫"),1)]),(0,r.Lk)("p",null,[t[11]||(t[11]=(0,r.Lk)("i",{class:"fas fa-warehouse"},null,-1)),(0,r.eW)(" 存儲區域："+(0,i.v_)(e.storageLocation||"未指定"),1)]),(0,r.Lk)("p",null,[t[12]||(t[12]=(0,r.Lk)("i",{class:"fas fa-suitcase"},null,-1)),(0,r.eW)(" "+(0,i.v_)(e.luggageCount)+" 件行李",1)]),(0,r.Lk)("p",null,[t[13]||(t[13]=(0,r.Lk)("i",{class:"fas fa-sticky-note"},null,-1)),(0,r.eW)(" 備註："+(0,i.v_)(e.remark||"無"),1)]),(0,r.Lk)("p",null,[t[14]||(t[14]=(0,r.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,r.eW)(" "+(0,i.v_)(H.formatTime(e.checkinTime)),1)])])],10,b))),128))])]))),128))])):((0,r.uX)(),(0,r.CE)("div",y,[t[6]||(t[6]=(0,r.Lk)("i",{class:"fas fa-calendar-times"},null,-1)),(0,r.eW)(" "+(0,i.v_)(H.selectedDate?"該日期無待列印行李":"暫無待列印行李"),1)]))]),(0,r.Lk)("div",A,[t[25]||(t[25]=(0,r.Lk)("h2",null,[(0,r.Lk)("i",{class:"fas fa-redo"}),(0,r.eW)(" 可重新列印行李標籤")],-1)),0!==H.printedLuggage.length||H.loading?((0,r.uX)(),(0,r.CE)("div",T,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(H.groupedPrintedLuggage,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.date},[(0,r.Lk)("h3",E,(0,i.v_)(H.formatGroupDate(e.date)),1),(0,r.Lk)("div",x,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.items,e=>((0,r.uX)(),(0,r.CE)("div",{key:e.id,class:(0,i.C4)(["luggage-card",{active:H.luggageInfo?.id===e.id}]),onClick:t=>H.loadLuggage(e.id)},[(0,r.Lk)("div",I,[t[17]||(t[17]=(0,r.Lk)("span",{class:"badge reprinted"},"重印",-1)),(0,r.Lk)("strong",null,(0,i.v_)(e.id),1)]),(0,r.Lk)("div",N,[(0,r.Lk)("p",null,[t[18]||(t[18]=(0,r.Lk)("i",{class:"fas fa-user"},null,-1)),(0,r.eW)(" "+(0,i.v_)(e.guestName),1)]),(0,r.Lk)("p",null,[t[19]||(t[19]=(0,r.Lk)("i",{class:"fas fa-phone"},null,-1)),(0,r.eW)(" ***-****-"+(0,i.v_)(H.getPhoneLast4(e.phone)),1)]),(0,r.Lk)("p",null,[t[20]||(t[20]=(0,r.Lk)("i",{class:"fas fa-building"},null,-1)),(0,r.eW)(" 房間號："+(0,i.v_)(e.roomNumber||"未填寫"),1)]),(0,r.Lk)("p",null,[t[21]||(t[21]=(0,r.Lk)("i",{class:"fas fa-warehouse"},null,-1)),(0,r.eW)(" 存儲區域："+(0,i.v_)(e.storageLocation||"未指定"),1)]),(0,r.Lk)("p",null,[t[22]||(t[22]=(0,r.Lk)("i",{class:"fas fa-suitcase"},null,-1)),(0,r.eW)(" "+(0,i.v_)(e.luggageCount)+" 件行李",1)]),(0,r.Lk)("p",null,[t[23]||(t[23]=(0,r.Lk)("i",{class:"fas fa-sticky-note"},null,-1)),(0,r.eW)(" 備註："+(0,i.v_)(e.remark||"無"),1)]),(0,r.Lk)("p",null,[t[24]||(t[24]=(0,r.Lk)("i",{class:"fas fa-clock"},null,-1)),(0,r.eW)(" "+(0,i.v_)(H.formatTime(e.checkinTime)),1)])])],10,_))),128))])]))),128))])):((0,r.uX)(),(0,r.CE)("div",B,[t[16]||(t[16]=(0,r.Lk)("i",{class:"fas fa-calendar-times"},null,-1)),(0,r.eW)(" "+(0,i.v_)(H.selectedDate?"該日期無可重新列印行李":"暫無可重新列印行李"),1)]))])]),(0,r.Lk)("div",{class:(0,i.C4)(["preview-sidebar",{"has-content":H.luggageInfo}])},[H.luggageInfo?((0,r.uX)(),(0,r.CE)("div",Y,[(0,r.Lk)("div",R,[(0,r.Lk)("h2",null,[t[26]||(t[26]=(0,r.Lk)("i",{class:"fas fa-tags"},null,-1)),(0,r.eW)(" 行李標籤預覽 - "+(0,i.v_)(H.luggageInfo.id),1)]),(0,r.Lk)("div",P,[(0,r.Lk)("p",null,[t[27]||(t[27]=(0,r.Lk)("i",{class:"fas fa-user"},null,-1)),(0,r.eW)(" "+(0,i.v_)(H.luggageInfo.guestName),1)]),(0,r.Lk)("p",null,[t[28]||(t[28]=(0,r.Lk)("i",{class:"fas fa-phone"},null,-1)),(0,r.eW)(" ***-****-"+(0,i.v_)(H.luggageInfo.phoneLast4),1)]),(0,r.Lk)("p",null,[t[29]||(t[29]=(0,r.Lk)("i",{class:"fas fa-building"},null,-1)),(0,r.eW)(" 房間號："+(0,i.v_)(H.luggageInfo.roomNumber||"未填寫"),1)]),(0,r.Lk)("p",null,[t[30]||(t[30]=(0,r.Lk)("i",{class:"fas fa-warehouse"},null,-1)),(0,r.eW)(" 存儲區域："+(0,i.v_)(H.luggageInfo.storageLocation||"未指定"),1)]),(0,r.Lk)("p",null,[t[31]||(t[31]=(0,r.Lk)("i",{class:"fas fa-suitcase"},null,-1)),(0,r.eW)(" "+(0,i.v_)(H.luggageInfo.luggageCount)+" 件行李",1)]),(0,r.Lk)("p",null,[t[32]||(t[32]=(0,r.Lk)("i",{class:"fas fa-sticky-note"},null,-1)),(0,r.eW)(" 備註："+(0,i.v_)(H.luggageInfo.remark||"無"),1)])])]),(0,r.Lk)("div",S,[(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>H.printTickets&&H.printTickets(...e)),class:"print-btn"},t[33]||(t[33]=[(0,r.Lk)("i",{class:"fas fa-print"},null,-1),(0,r.eW)(" 列印兩種標籤 ")])),(0,r.Lk)("div",O,[(0,r.Lk)("img",{src:H.customerQRCode,alt:"客人取件憑證二維碼"},null,8,W),t[34]||(t[34]=(0,r.Lk)("div",{class:"qr-meta"},[(0,r.Lk)("p",null,"客人取件憑證")],-1))]),(0,r.Lk)("div",$,[(0,r.Lk)("img",{src:H.luggageQRCode,alt:"行李標籤二維碼"},null,8,K),t[35]||(t[35]=(0,r.Lk)("div",{class:"qr-meta"},[(0,r.Lk)("p",null,"行李存放標籤")],-1))])])])):((0,r.uX)(),(0,r.CE)("div",q,t[36]||(t[36]=[(0,r.Lk)("i",{class:"fas fa-info-circle"},null,-1),(0,r.Lk)("p",null,"請從左側選擇行李以預覽標籤",-1)])))],2)])])}n(4114),n(8111),n(116),n(7588),n(1701),n(3579);var F=n(144),X=n(1576),U=n.n(X),z=(n(454),n(1928));U().locale("zh-tw");var Q={name:"QrBatch",setup(){const e=(0,F.KR)(""),t=(0,F.KR)(""),a=(0,F.KR)(null),i=(0,F.KR)([]),l=(0,F.KR)([]),o=(0,F.KR)(""),s=(0,F.KR)(!1),u=(0,F.KR)(U()().format("YYYY-MM-DD")),c=(0,F.KR)(null),f=(0,F.KR)(!1),g=(0,F.KR)([{label:"今天",value:u.value,type:"day"},{label:"昨天",value:U()().subtract(1,"day").format("YYYY-MM-DD"),type:"day"},{label:"本週",value:U()().startOf("week").format("YYYY-MM-DD"),type:"range"},{label:"本月",value:U()().startOf("month").format("YYYY-MM-DD"),type:"range"}]),d=(0,r.EW)(()=>g.value.find(e=>e.value===o.value)),v=(0,r.EW)(()=>{if(!o.value)return"所有日期";const e=U()(o.value),t=U()();return e.isSame(t,"day")?"今天 ("+e.format("MM/DD")+")":e.isSame(t.subtract(1,"day"),"day")?"昨天 ("+e.format("MM/DD")+")":e.isSame(t,"week")?"本週 ("+e.format("MM/DD")+" ~ "+t.format("MM/DD")+")":e.isSame(t,"month")?"本月 ("+e.format("MM/01")+" ~ "+t.format("MM/DD")+")":e.format("YYYY年MM月DD日")}),h=e=>{const t={};return e.forEach(e=>{const n=U()(e.checkinTime).format("YYYY-MM-DD");t[n]||(t[n]=[]),t[n].push(e)}),Object.keys(t).map(e=>({date:e,items:t[e].sort((e,t)=>new Date(t.checkinTime)-new Date(e.checkinTime))})).sort((e,t)=>new Date(t.date)-new Date(e.date))},p=(0,r.EW)(()=>h(i.value)),k=(0,r.EW)(()=>h(l.value)),m=e=>{const t=U()().format("YYYY-MM-DD"),n=U()().subtract(1,"day").format("YYYY-MM-DD");return e===t?"今天 ("+U()(e).format("MM/DD")+")":e===n?"昨天 ("+U()(e).format("MM/DD")+")":U()(e).format("YYYY年MM月DD日")},y=e=>U()(e).format("HH:mm"),w=e=>U()(e).format("YYYY年MM月DD日"),L=e=>{if(!e||"string"!==typeof e)return"0000";const t=e.replace(/\D/g,"");return t.length<4?t||"0000":t.slice(-4)},D=()=>{o.value="",M()},b=e=>{o.value=e,M()},M=()=>{C(),A()},C=async()=>{if(f.value)console.log("已有請求在處理中，跳過本次定時請求");else try{f.value=!0,s.value=!0;const e={};o.value&&("range"===d.value?.type?(e.startDate=o.value,e.endDate=u.value):e.date=o.value),console.log("發送數據請求，參數:",e);const[t,n]=await Promise.all([z.A.getPendingForQR(e),z.A.getPrintedLuggage(e)]);if(!Array.isArray(t.data))return void console.error("待列印數據格式錯誤，期望數組:",t.data);if(!Array.isArray(n.data))return void console.error("可重列印數據格式錯誤，期望數組:",n.data);i.value=[...t.data],l.value=[...n.data],console.log("數據刷新完成 - 待列印:",i.value.length,"可重列印:",l.value.length)}catch(e){console.error("數據請求失敗:",e)}finally{s.value=!1,f.value=!1}},A=()=>{c.value&&(clearInterval(c.value),console.log("已清除舊定時器")),c.value=setInterval(()=>{console.log("定時器觸發，刷新數據"),C()},3e3),console.log("已啟動新定時器，每3秒刷新一次")},B=async e=>{try{s.value=!0;const t=await z.A.getLuggageById(e),n=t.data;a.value={id:n.id,guestName:n.guestName,phoneLast4:L(n.phone),luggageCount:n.luggageCount,checkinTime:n.checkinTime,roomNumber:n.roomNumber||"",storageLocation:n.storageLocation||"",remark:n.remark||""},await T(n)}catch(t){console.error("加載行李信息失敗:",t);let e="加載行李信息失敗";t.response&&(404===t.response.status?e="行李記錄不存在":t.response.data&&t.response.data.message&&(e=t.response.data.message)),alert(`${e}，請稍後重試`)}finally{s.value=!1}},T=e=>{try{E(e)}catch(t){console.error("前端生成二維碼失敗:",t),x(e)}},E=r=>{const a=JSON.stringify({type:"customer_ticket",luggageId:r.id}),i=JSON.stringify({type:"luggage_tag",luggageId:r.id}),l=n(4343),o=l(0,"M");o.addData(a),o.make(),e.value=o.createDataURL(6);const s=l(0,"M");s.addData(i),s.make(),t.value=s.createDataURL(6)},x=n=>{const r=JSON.stringify({type:"customer_ticket",luggageId:n.id,guestName:n.guestName,remark:n.remark||"無"}),a=JSON.stringify({type:"luggage_tag",luggageId:n.id,guestName:n.guestName,remark:n.remark||"無"});e.value=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(r)}`,t.value=`https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(a)}`},_=async()=>{try{const t=a.value.id,n=l.value.some(e=>e.id===t);if(!n){try{await z.A.markAsQrGenerated(t)}catch(e){console.error("標記打印狀態失敗:",e)}const n=i.value.findIndex(e=>e.id===t);if(-1!==n){const[e]=i.value.splice(n,1);l.value.push(e)}}const r=I(),o=N(),s=r+o,u=window.open("","_blank");u.document.write(`\n          <!DOCTYPE html>\n          <html>\n          <head>\n            <title>列印行李標籤</title>\n            <style>\n              @page { size: auto; margin: 5mm; }\n              body { font-family: Arial, sans-serif; }\n              .ticket { \n                page-break-after: always; \n                padding: 10px; \n                border: 1px dashed #ccc; \n                margin-bottom: 10px;\n                text-align: center;\n                width: 80mm;\n              }\n              .ticket:last-child { \n                page-break-after: auto; \n              }\n              .hotel-logo {\n                max-width: 60px;\n                margin-bottom: 5px;\n              }\n              .ticket-header {\n                font-weight: bold;\n                font-size: 16px;\n                margin-bottom: 8px;\n              }\n              .ticket-info {\n                font-size: 20px;\n                margin: 4px 0;\n                text-align: left;\n              }\n              .ticket-qr {\n                width: 180px;\n                height: 180px;\n              }\n              .terms {\n                font-size: 13px;\n                text-align: left;\n                margin-top: 10px;\n              }\n              .ticket-info.large-print {\n                font-size: 30pt; \n                font-weight: bold;\n                margin: 10px 0; \n                word-break: break-all; \n              }\n              .field-label {\n                color: #222;\n                min-width: 90px;\n                display: inline-block;\n              }\n            </style>\n          </head>\n          <body>\n            ${s}\n          </body>\n          </html>\n        `),u.document.close(),u.onload=function(){u.print(),setTimeout(()=>{u.close()},100)}}catch(t){console.error("列印失敗:",t),alert("列印失敗，請稍後重試")}},I=()=>{const t=a.value.roomNumber||"未填寫",n=a.value.storageLocation||"未指定",r=a.value.remark||"無";return`\n        <div class="ticket">\n          <div class="ticket-header">\n            <img src="/images/new_orient_group.jpg" class="hotel-logo"> \n            <div>行李寄存憑證</div>\n          </div>\n          <div class="divider"></div>\n          <div class="ticket-info large-print">\n            <span class="field-label">行李ID:</span> \n            <span>${a.value.id}</span>\n          </div>\n          <div class="ticket-info">\n            <span class="field-label">客人姓名:</span> \n            <span>${a.value.guestName}</span>\n          </div>\n          <div class="ticket-info">\n            <span class="field-label">手機尾號:</span> \n            <span>${a.value.phoneLast4}</span>\n          </div>\n          <div class="ticket-info">\n            <span class="field-label">房間號:</span> \n            <span>${t}</span>\n          </div>\n          <div class="ticket-info">\n            <span class="field-label">存儲區域:</span> \n            <span>${n}</span>\n          </div>\n          <div class="ticket-info">\n            <span class="field-label">行李件數:</span>   \n            <span>${a.value.luggageCount} </span>\n          </div>\n          <div class="ticket-info">\n            <span class="field-label">行李備註:</span> \n            <span>${r}</span>\n          </div>\n          <div class="ticket-info">\n            <span class="field-label">寄存時間:</span> \n            <span>${U()(a.value.checkinTime).format("YYYY-MM-DD HH:mm:ss")}</span>\n          </div>\n          <div class="ticket-info">\n            <span class="field-label">客戶簽名:</span>\n            <span style="border-bottom: 1px solid #333; width: 180px; display: inline-block; margin-left: 10px;"></span>\n          </div>\n          <img src="${e.value}" alt="取件二維碼" class="ticket-qr">\n          <div class="terms">\n            <div><strong>服務條款:</strong></div>\n            <div>1.This is our policy to keep Hotel guest's luggage in our storeroom free of charge for no more than three days. We will levy a storage charge of MOP20.00 per day on each item thereafter until they are being claimed.</div>\n            <div>2.The Hotel will not be held responsible for any loss or damage of the luggage deposited or articles contained in them.</div>\n            <div>3.The Hotel reserves the right to dispose any unclaimed luggage held in our storage for more than FIFTEEN DAYS without any liability.</div>\n            <div>4.By using this service, guests acknowledge and agree to these terms.</div>\n            <div>1.本酒店可代客人免費存放行李在貯物室，為期不超過三天，如超過限期，本酒店將按日徵收每件澳門幣貳拾圓正作為貯存費，直至領回為止。</div>\n            <div>2.本酒店在任何情況下不負責行李之損壞或遺失。</div>\n            <div>3.所有寄存物件，如在十五天內無人認領，本酒店有權處理該物品且無須承擔任何賠償責任。</div>\n            <div>4.使用此服務即表示已閱讀並同意上述條款。</div>\n          </div>\n        </div>\n      `},N=()=>{const e=a.value.roomNumber||"未填寫",n=a.value.storageLocation||"未指定",r=a.value.remark||"無";return`\n      <div class="ticket">\n        <div class="ticket-header">\n          <img src="/images/new_orient_group.jpg" class="hotel-logo"> \n          <div>行李存放標籤</div>\n        </div>\n        <div class="divider"></div>\n        <div class="ticket-info large-print">\n          <span class="field-label">行李ID:</span> \n          <span>${a.value.id}</span>\n        </div>\n        <div class="ticket-info">\n          <span class="field-label">客人姓名:</span> \n          <span>${a.value.guestName}</span>\n        </div>\n        <div class="ticket-info">\n          <span class="field-label">房間號:</span> \n          <span>${e}</span>\n        </div>\n        <div class="ticket-info">\n          <span class="field-label">存儲區域:</span> \n          <span>${n}</span>\n        </div>\n        <div class="ticket-info">\n          <span class="field-label">行李件數:</span> \n          <span>${a.value.luggageCount} &nbsp&nbsp;</span>\n        </div>\n        <div class="ticket-info">\n          <span class="field-label">行李備註:</span> \n          <span>${r}</span>\n        </div>\n        <div class="ticket-info">\n          <span class="field-label">寄存時間:</span> \n          <span>${U()(a.value.checkinTime).format("YYYY-MM-DD HH:mm:ss")}</span>\n        </div>\n        <div class="ticket-info">\n          <span class="field-label">客戶簽名:</span>\n          <span style="border-bottom: 1px solid #333; width: 180px; display: inline-block; margin-left: 10px;"></span>\n        </div>\n        <img src="${t.value}" alt="行李二維碼" class="ticket-qr">\n      </div>\n      `};return(0,r.wB)(o,e=>{e&&e>u.value&&(o.value=u.value,alert("無法選擇未來日期，已自動切換為今天"))}),(0,r.sV)(()=>{o.value=u.value,C(),A()}),(0,r.hi)(()=>{c.value&&(clearInterval(c.value),console.log("組件銷毀，已清除定時器"))}),{customerQRCode:e,luggageQRCode:t,luggageInfo:a,pendingLuggage:i,printedLuggage:l,selectedDate:o,loading:s,today:u,quickDates:g,selectedQuickDate:d,formattedSelectedDate:v,groupedPendingLuggage:p,groupedPrintedLuggage:k,loadLuggage:B,printTickets:_,resetDateFilter:D,selectQuickDate:b,handleDateChange:M,formatGroupDate:m,formatTime:y,formatDate:w,getPhoneLast4:L}}},j=n(1241);const J=(0,j.A)(Q,[["render",H],["__scopeId","data-v-1006dd58"]]);var G=J}}]);
//# sourceMappingURL=142.8c3eba7a.js.map