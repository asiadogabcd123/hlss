{"version":3,"file":"js/616.5d346f07.js","mappings":"qGAIAA,EAAQ,EAAU,CAACC,EAAKC,KACpB,MAAMC,EAASF,EAAIG,WAAaH,EAChC,IAAK,MAAOI,EAAKC,KAAQJ,EACrBC,EAAOE,GAAOC,EAElB,OAAOH,E,qCCPXI,QAAQC,IAAI,cAAeC,EAAAA,GAC3BF,QAAQC,IAAI,WAAYC,EAAAA,EAAIC,SAASC,SAG9B,MAAMC,EAAgBC,IACvBA,EACFJ,EAAAA,EAAIC,SAASI,QAAQC,OAAO,iBAAmB,UAAUF,WAElDJ,EAAAA,EAAIC,SAASI,QAAQC,OAAO,kBAQvC,KAEEH,eAOAI,MAAAA,CAAOC,GACL,OAAOR,EAAAA,EAAIS,KAAK,WAAYD,EAC9B,EAMAE,QAAAA,GACE,OAAOV,EAAAA,EAAIW,IAAI,iBACjB,EAOAC,UAAAA,CAAWC,GACT,OAAOb,EAAAA,EAAIW,IAAI,YAAYE,IAC7B,EAUAC,eAAAA,CAAgBC,EAAS,CAAC,GACxB,MAAMC,EAAkB,CAAC,EAOzB,OANID,EAAOE,KACTD,EAAgBC,KAAOF,EAAOE,KACrBF,EAAOG,WAAaH,EAAOI,UACpCH,EAAgBE,UAAYH,EAAOG,UACnCF,EAAgBG,QAAUJ,EAAOI,SAE5BnB,EAAAA,EAAIW,IAAI,sBAAuB,CAAEI,OAAQC,GAClD,EAOAI,iBAAAA,CAAkBL,EAAS,CAAC,GAC1B,MAAMC,EAAkB,CAAC,EAOzB,OANID,EAAOE,KACTD,EAAgBC,KAAOF,EAAOE,KACrBF,EAAOG,WAAaH,EAAOI,UACpCH,EAAgBE,UAAYH,EAAOG,UACnCF,EAAgBG,QAAUJ,EAAOI,SAE5BnB,EAAAA,EAAIW,IAAI,sBAAuB,CAAEI,OAAQC,GAClD,EAMAK,oBAAAA,GACE,OAAOrB,EAAAA,EAAIW,IAAI,mBACjB,EAMAW,qBAAAA,GAEE,MAAMC,GAAQ,IAAIC,MAAOC,cAAcC,MAAM,KAAK,GAClD,OAAO1B,EAAAA,EAAIW,IAAI,wBAAyB,CACtCI,OAAQ,CAAEE,KAAMM,IAEpB,EAOAI,wBAAAA,GAEE,MAAMJ,GAAQ,IAAIC,MAAOC,cAAcC,MAAM,KAAK,GAClD,OAAO1B,EAAAA,EAAIW,IAAI,2BAA4B,CACzCI,OAAQ,CAAEE,KAAMM,IAEpB,EAOAK,cAAAA,CAAeC,GAEb,MAAMC,EAA4B,kBAAPD,GAAmBA,EAAGE,WAAW,QACxDF,EAAGG,QAAQ,OAAQ,IACnBH,EACJ,OAAO7B,EAAAA,EAAIW,IAAI,mBAAmBmB,IACpC,EAQAG,cAAAA,CAAeJ,EAAIK,GACjB,OAAOlC,EAAAA,EAAIS,KAAK,YAAYoB,oBAAsB,KAAM,CACtDd,OAAQ,CAAEmB,UAEd,EAOAC,iBAAAA,CAAkBN,GAChB,OAAO7B,EAAAA,EAAIoC,IAAI,YAAYP,iBAC7B,EAOAQ,YAAAA,CAAaR,GACX,OAAO7B,EAAAA,EAAIS,KAAK,YAAYoB,kBAC9B,EAQAS,iBAAAA,CAAkBT,EAAIrB,GACpB,OAAOR,EAAAA,EAAIS,KAAK,YAAYoB,aAAerB,EAC7C,EAOA+B,aAAAA,CAAcV,GACZ,OAAO7B,EAAAA,EAAIoC,IAAI,wBAAwBP,IACzC,EAOAW,eAAAA,CAAgBC,GACd,OAAOzC,EAAAA,EAAIW,IAAI,gBAAgB8B,IACjC,EAQAC,mBAAAA,CAAoBxB,EAAWC,GAC7B,OAAOnB,EAAAA,EAAIW,IAAI,0BAA2B,CACxCI,OAAQ,CAAEG,YAAWC,YAEzB,EAQAwB,sBAAAA,CAAuBzB,EAAWC,GAChC,OAAOnB,EAAAA,EAAIW,IAAI,6BAA8B,CAC3CI,OAAQ,CAAEG,YAAWC,YAEzB,E","sources":["webpack://hlss/./node_modules/vue-loader/dist/exportHelper.js","webpack://hlss/./src/api/luggage.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","import api from './index'\r\n\r\nconsole.log('API 實例是否有效:', api)  \r\nconsole.log('BaseURL:', api.defaults.baseURL)  \r\n\r\n// 設置認證Token\r\nexport const setAuthToken = (token) => {\r\n  if (token) {\r\n    api.defaults.headers.common['Authorization'] = `Bearer ${token}`\r\n  } else {\r\n    delete api.defaults.headers.common['Authorization']\r\n  }\r\n}\r\n\r\n/**\r\n * 行李管理相關API\r\n * 包含寄存、查詢、取件等所有請求方法\r\n */\r\nexport default {\r\n  // 設置認證Token\r\n  setAuthToken,\r\n  \r\n  /**\r\n   * 創建行李寄存記錄\r\n   * @param {Object} payload - 寄存信息\r\n   * @returns {Promise} - 請求Promise\r\n   */\r\n  create(payload) {\r\n    return api.post('/luggage', payload) \r\n  },\r\n  \r\n  /**\r\n   * 獲取行李統計數據\r\n   * @returns {Promise} - 統計信息Promise\r\n   */\r\n  getStats() {\r\n    return api.get('/luggage/stats')\r\n  },\r\n  \r\n  /**\r\n   * 根據驗證碼查詢行李\r\n   * @param {string} code - 驗證碼\r\n   * @returns {Promise} - 行李信息Promise\r\n   */\r\n  findByCode(code) {\r\n    return api.get(`/luggage/${code}`)\r\n  },\r\n\r\n\r\n  // === 工作人員標籤管理API ===\r\n  \r\n  /**\r\n   * 獲取待打印行李標籤列表 (qr_generated=0)\r\n   * @param {Object} params - 查詢參數（date或startDate+endDate）\r\n   * @returns {Promise} - 行李列表Promise\r\n   */\r\n  getPendingForQR(params = {}) {\r\n    const validatedParams = {}\r\n    if (params.date) {\r\n      validatedParams.date = params.date\r\n    } else if (params.startDate && params.endDate) {\r\n      validatedParams.startDate = params.startDate\r\n      validatedParams.endDate = params.endDate\r\n    }\r\n    return api.get('/luggage/pending-qr', { params: validatedParams })\r\n  },\r\n  \r\n  /**\r\n   * 獲取可重新打印行李標籤列表 (qr_generated=1)\r\n   * @param {Object} params - 查詢參數（date或startDate+endDate）\r\n   * @returns {Promise} - 行李列表Promise\r\n   */\r\n  getPrintedLuggage(params = {}) {\r\n    const validatedParams = {}\r\n    if (params.date) {\r\n      validatedParams.date = params.date\r\n    } else if (params.startDate && params.endDate) {\r\n      validatedParams.startDate = params.startDate\r\n      validatedParams.endDate = params.endDate\r\n    }\r\n    return api.get('/luggage/printed-qr', { params: validatedParams })\r\n  },\r\n  \r\n  /**\r\n   * 獲取全部當前寄存的行李（未取件狀態）\r\n   * @returns {Promise} - 行李列表Promise\r\n   */\r\n  getAllCurrentLuggage() {\r\n    return api.get('/luggage/current')\r\n  },\r\n  \r\n  /**\r\n   * 查詢今日寄存記錄（只查當天）\r\n   * @returns {Promise} - 今日寄存列表\r\n   */\r\n  getTodayStoredLuggage() {\r\n    // 前端強制使用當天日期\r\n    const today = new Date().toISOString().split('T')[0]\r\n    return api.get('/luggage/today-stored', {\r\n      params: { date: today }\r\n    })\r\n  },\r\n  \r\n\r\n  /**\r\n   * 查詢今日取件記錄（只查當天）\r\n   * @returns {Promise} - 今日取件列表\r\n   */\r\n  getTodayRetrievedLuggage() {\r\n    // 前端強制使用當天日期\r\n    const today = new Date().toISOString().split('T')[0]\r\n    return api.get('/luggage/today-retrieved', {\r\n      params: { date: today }\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 根據ID獲取行李詳情\r\n   * @param {number|string} id - 行李ID或訂單編號（如LUG-123）\r\n   * @returns {Promise} - 行李詳情Promise\r\n   */\r\n  getLuggageById(id) {\r\n    // 處理業務編號格式（如LUG-123）\r\n    const processedId = typeof id === 'string' && id.startsWith('LUG-') \r\n      ? id.replace('LUG-', '') \r\n      : id;\r\n    return api.get(`/luggage/detail/${processedId}`)\r\n  },\r\n  \r\n  /**\r\n   * 生成行李標籤\r\n   * @param {number} id - 行李ID\r\n   * @param {number} count - 標籤數量\r\n   * @returns {Promise} - 生成結果Promise\r\n   */\r\n  generateLabels(id, count) {\r\n    return api.post(`/luggage/${id}/generate-labels`, null, {\r\n      params: { count }\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 標記行李為已生成QR碼\r\n   * @param {number} id - 行李ID\r\n   * @returns {Promise} - 標記結果Promise\r\n   */\r\n  markAsQrGenerated(id) {\r\n    return api.put(`/luggage/${id}/mark-printed`)\r\n  },\r\n\r\n  /**\r\n   * 請求後端打印憑證（新增接口）\r\n   * @param {number} id - 行李ID\r\n   * @returns {Promise} - 打印結果Promise\r\n   */\r\n  printVoucher(id) {\r\n    return api.post(`/luggage/${id}/print-voucher`)\r\n  },\r\n  \r\n  /**\r\n   * 完成取件操作\r\n   * @param {number} id - 行李ID\r\n   * @param {object} payload - 取件數據（包含scannedLuggage數組）\r\n   * @returns {Promise} - 取件結果Promise\r\n   */\r\n  completeRetrieval(id, payload) {\r\n    return api.post(`/luggage/${id}/retrieve`, payload)\r\n  },\r\n  \r\n  /**\r\n   * 將過期行李標記為已刪除狀態（僅更新狀態）\r\n   * @param {number} id - 行李ID\r\n   * @returns {Promise} - 請求Promise\r\n   */\r\n  markAsDeleted(id) {\r\n    return api.put(`/luggage/mark-delete/${id}`)\r\n  },\r\n\r\n  /**\r\n   * 根據行李標籤獲取行李信息\r\n   * @param {string} tag - 行李標籤 (格式: LUG-{id}-{index})\r\n   * @returns {Promise} - 行李信息Promise\r\n   */\r\n  getLuggageByTag(tag) {\r\n    return api.get(`/luggage/tag/${tag}`)\r\n  },\r\n\r\n  /**\r\n   * 查詢指定時間段的寄存記錄（歷史記錄）\r\n   * @param {string} startDate - 開始日期（YYYY-MM-DD）\r\n   * @param {string} endDate - 結束日期（YYYY-MM-DD）\r\n   * @returns {Promise} - 寄存記錄列表\r\n   */\r\n  getHistoricalStored(startDate, endDate) {\r\n    return api.get('/luggage/history/stored', {\r\n      params: { startDate, endDate }\r\n    })\r\n  },\r\n\r\n  /**\r\n   * 查詢指定時間段的取件記錄（歷史記錄）\r\n   * @param {string} startDate - 開始日期（YYYY-MM-DD）\r\n   * @param {string} endDate - 結束日期（YYYY-MM-DD）\r\n   * @returns {Promise} - 取件記錄列表\r\n   */\r\n  getHistoricalRetrieved(startDate, endDate) {\r\n    return api.get('/luggage/history/retrieved', {\r\n      params: { startDate, endDate }\r\n    })\r\n  }\r\n}"],"names":["exports","sfc","props","target","__vccOpts","key","val","console","log","api","defaults","baseURL","setAuthToken","token","headers","common","create","payload","post","getStats","get","findByCode","code","getPendingForQR","params","validatedParams","date","startDate","endDate","getPrintedLuggage","getAllCurrentLuggage","getTodayStoredLuggage","today","Date","toISOString","split","getTodayRetrievedLuggage","getLuggageById","id","processedId","startsWith","replace","generateLabels","count","markAsQrGenerated","put","printVoucher","completeRetrieval","markAsDeleted","getLuggageByTag","tag","getHistoricalStored","getHistoricalRetrieved"],"sourceRoot":""}